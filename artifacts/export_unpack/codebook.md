# Evidify Export Codebook v2.0

## Study Information
- **Study ID**: BRPLL-DEMO
- **Protocol Version**: BRPLL-MAMMO-v1.0
- **Site ID**: DEMO

## Condition Assignment
- **Reveal Timing**: CONCURRENT
  - HUMAN_FIRST: Reader makes initial assessment before seeing AI
  - AI_FIRST: Reader sees AI suggestion before making assessment
  - CONCURRENT: Reader sees AI and makes assessment simultaneously
- **Disclosure Format**: FDR_FOR
  - FDR_FOR: False Discovery Rate and False Omission Rate shown
  - NATURAL_FREQUENCY: "X out of 100" format
  - NONE: No error rate disclosure

## Event Types

### Session Events
- **SESSION_STARTED**: Study session initialized
- **RANDOMIZATION_ASSIGNED**: Condition randomly assigned with seed
- **SESSION_ENDED**: Study session completed

### Case Events
- **CASE_LOADED**: Mammogram case presented to reader
- **IMAGE_VIEWED**: Reader viewed/interacted with image
- **FIRST_IMPRESSION_LOCKED**: Initial BI-RADS assessment locked
- **AI_REVEALED**: AI suggestion shown to reader
- **DISCLOSURE_PRESENTED**: Error rate information shown
- **DISCLOSURE_COMPREHENSION_RESPONSE**: Reader answered comprehension check
- **DEVIATION_STARTED**: Reader began changing assessment
- **DEVIATION_SUBMITTED**: Reader documented rationale for change
- **DEVIATION_SKIPPED**: Reader skipped documentation (with attestation)
- **FINAL_ASSESSMENT**: Final BI-RADS assessment submitted
- **CASE_COMPLETED**: Case processing finished

### Attention & Calibration
- **CALIBRATION_STARTED**: Training case begun
- **CALIBRATION_FEEDBACK_SHOWN**: Feedback provided on training case
- **ATTENTION_CHECK_PRESENTED**: Catch trial presented
- **ATTENTION_CHECK_RESPONSE**: Reader response to catch trial

## Derived Metrics

### Primary Outcome: ADDA (Appropriate Deference to Decision Aid)
- **adda**: TRUE if reader changed toward AI when initial ≠ AI suggestion
- **adda_denominator**: TRUE if initial assessment differed from AI (eligible for ADDA)
- **change_occurred**: TRUE if final ≠ initial assessment
- **ai_consistent_change**: TRUE if change moved toward AI suggestion

### Timing Metrics
- **preAiTimeMs**: Time from case load to first impression lock
- **postAiTimeMs**: Time from AI reveal to final assessment
- **totalTimeMs**: Total time on case

## Hash Chain Verification

Each event is linked via SHA-256 hash chain:
```
contentHash = SHA256(canonical_json(type + payload + timestamp))
chainHash[n] = SHA256(prevChainHash | contentHash | timestamp)
```

Verification: Run `verify-export.ts` on the ZIP package.

## Timestamp Trust Model
**client_clock_untrusted**: Timestamps are from client device and not independently verified.
For legal defensibility, consider server-side receipt integration.

---
Generated by Evidify Export System v2.0
Timestamp Trust Model: client_clock_untrusted
